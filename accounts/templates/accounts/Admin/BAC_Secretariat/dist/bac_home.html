{% extends "accounts/Admin/BAC_Secretariat/bac.html" %}

{% load static %}

{% block bac_home %}


<div class="container-fluid" style=" height: 68vh; overflow-y: auto; overflow-x: hidden;">
    <h1 class="pr text-center pt-4">PURCHASE REQUEST</h1>  

  <div class="custom-f row w-100 m-auto border text-start text-dark">
    <table class="table table-bordered" style="margin: 0px !important;">
      <thead>
        <th id="categorySelectionLink" class="modal-link highlight-on-hover" data-toggle="modal"
          data-target="#categorySelectionModal">
          7210844 has sent a request
          <span style="float: right;">{{ submission_date|date:"m/d/y" }}</span>
        </th>
      </thead>
      <tbody id="requestTableBody">
        <!-- This tbody will be dynamically updated with new requests -->
      </tbody>
    </table>
  </div>
</div>
<script>
  // Your JavaScript code for dynamic updates goes here
  $(document).ready(function () {
    // Function to add a new request to the table
    function addNewRequest(requester, date) {
      var newRow = '<tr><td class="modal-link highlight-on-hover" data-toggle="modal" data-target="#categorySelectionModal">' +
        requester + ' has sent a request<span style="float: right;">' + date + '</span></td></tr>';
      $("#requestTableBody").prepend(newRow);
    }

    // Function to submit a new request
    function submitRequest() {
      // Simulate submitting a request (replace this with your actual logic)
      $.ajax({
        url: '/submit-request',  // Replace with the actual endpoint to submit requests
        method: 'POST',
        data: {
          // Include any data needed for the request
          // For example, requester name, date, etc.
        },
        success: function (response) {
          // Handle the response from the server
          // In this example, we assume the server responds with the new request details
          addNewRequest(response.requester, response.date);
        },
        error: function () {
          console.log('Error submitting request');
        }
      });
    }

    // Example: Simulate a new request being submitted when a button is clicked
    // You would replace this with the actual logic that triggers the request submission
    $('#submitRequestButton').on('click', function () {
      submitRequest();
    });
  });
</script>




<!-- Outer Modal for Category Selection -->
<div class="modal fade" id="categorySelectionModal" tabindex="-1" role="dialog"
  aria-labelledby="categorySelectionModalLabel" aria-hidden="true" style="backdrop-filter: blur(5px);">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="categorySelectionModalLabel">FORMS</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
            <div class="col-12 mb-3">
                <a href="{% url 'preqform'  %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Purchase Request Approval</button>
                </a>
            </div>
            <div class="col-12 mb-3">
                <a href="{% url 'bids' %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Resolution Approval</button>
                </a>
            </div>
            <div class="col-12 mb-3">
                <a href="{% url 'abstract' %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Abstract of Bids</button>
                </a>
            </div>
            <div class="col-12 mb-3">
                <a href="{% url 'noa' %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Notice of Reward</button>
                </a>
            </div>
            <div class="col-12 mb-3">
                <a href="{% url 'purchaseorder' %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Purchase Order</button>
                </a>
            </div>
            <div class="col-12 mb-3">
                <a href="{% url 'np' %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Notice to Proceed</button>
                </a>
            </div>
            <div class="col-12 mb-3">
                <a href="{% url 'inspection' %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Inspection and Acceptance Report</button>
                </a>
            </div>
            <div class="col-12 mb-3">
                <a href="{% url 'property' %}">
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal"
                        data-target="#category1ButtonModal">Property Acknowledgment Report</button>
                </a>
            </div>
        </div>
    </div>
      
    </div>
  </div>
</div>

</main>
  <script>
    $(document).ready(function () {
      $('#categorySelectionModal').on('show.bs.modal', function () {
        $('.blur-background').addClass('modal-open');
      });

      $('#categorySelectionModal').on('hidden.bs.modal', function () {
        $('.blur-background').removeClass('modal-open');
      });
    });
  </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  {% endblock %}