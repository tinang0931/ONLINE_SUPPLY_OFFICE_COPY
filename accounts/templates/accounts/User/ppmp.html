{% extends "accounts/Admin/BAC_Secretariat/nav.html" %}


{% load static %}


{% block ppmp %}

<style>
    .ctu_logo {
margin-top: -13%;
    }
    .table-bordered th {
        background-color: #1c96c5;
    }

    .item-actions {
        display: none;
    }

    tr:hover .item-actions {
        display: flex;
    }

    .additem {
        margin-left: 10px;
    }
    .btn {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 14px;
        /* Adjusted border-radius for smaller size */
        background: #144472;
        font-family: "Montserrat", sans-serif;
        box-shadow: 0px 6px 24px 0px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        cursor: pointer;
        border: none;
        margin-left: -107%;
        margin-top: 15%;
    }

.custom {
  font-size: 12px; /* Adjusted font size to 30% smaller */
  padding: 0.21em 1.05em; /* Adjusted padding to 30% smaller */
  background: #1c96c5;
  color: white;
  border-radius: 4px;
  transition: all 0.3s; /* Added transition for smoother animation */
  margin-top: 3.5%; /* Adjusted margin-top */
  border: 1px solid black;
}

.custom:hover {
  background: linear-gradient(90deg, rgba(30, 144, 255, 1) 0%, rgba(0, 212, 255, 1) 100%);
}

.custom:active {
  transform: translate(0em, 0.14em); /* Adjusted translation for 30% smaller */
}
.catalogue {
  font-size: 12px; /* Adjusted font size to 30% smaller */
  padding: 0.21em 1.05em; /* Adjusted padding to 30% smaller */
  background: #1c96c5;
  color: white;
  border-radius: 4px;
  transition: all 0.3s; /* Added transition for smoother animation */
  margin-top: 3.5%; /* Adjusted margin-top */
  margin-left: -117%;
  border: 1px solid black;
}

.catalogue:hover {
  background: linear-gradient(90deg, rgba(30, 144, 255, 1) 0%, rgba(0, 212, 255, 1) 100%);
}

.catalogue:active {
  transform: translate(0em, 0.14em); /* Adjusted translation for 30% smaller */
}
    .submt {
  font-size: 12px; /* Adjusted font size to 30% smaller */
  padding: 0.21em 1.05em; /* Adjusted padding to 30% smaller */
  background: #1c96c5;
  color: white;
  border-radius: 4px;
  transition: all 0.3s; /* Added transition for smoother animation */
  margin-left: 96%;
  border: 1px solid black;
}

.submt:hover {
  background: linear-gradient(90deg, rgba(30, 144, 255, 1) 0%, rgba(0, 212, 255, 1) 100%);
}

.submt:active {
  transform: translate(0em, 0.14em); /* Adjusted translation for 30% smaller */
}
</style>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

<link rel="stylesheet" href="{% static 'css/request.css' %}">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">


<div class="container-fluid" style=" height: 74vh; overflow-y: auto; overflow-x: hidden;">

    <div class="container">
        <h1 class="pr text-center pt-4">CREATE PROJECT PROCUREMENT MANAGEMENT PLAN(PPMP)</h1>
    </div>

    <div class="row">
        <div class="col-md-1 mb-2">
            <div class="additem">
                <button type="button" class="custom" data-toggle="modal" data-target="#addItemModal">
                    <span>Customize Item</span>
                </button>
            </div>
        </div>

        <div class="col-md-1 mb-0">
            
                <button class="catalogue">
                    <a href="{% url 'catalogue' %}" style="color: white; text-decoration: none;">Catalogue </a>
                </button>
           
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 ml-auto text-right">
            <h5> TOTAL ESTIMATED BUDGET : 1,000,000 </h5>
        </div>

        <div class="col-md-1 ml-auto text-left">
            <h5> TOTAL : 100,000 </h5>
        </div>
    </div>




    <div class="table-responsive">




        <form action="{% url 'ppmp' %}" method="post">
            {% csrf_token %}
            
        <table class="table  table-bordered">
            <thead>
                <tr>
                <tr>
                    <th rowspan='2'>Item Name</th>
                    <th rowspan='2'> Brand / Description</th>
                    <th rowspan='2'>Unit</th>
                    <th rowspan='2'>Estimated Budget</th>
                    <th colspan="12">Monthly Quantity Requirement</th>
                    <th rowspan='2'>Unit Price</th>
                    <th rowspan="2">Action</th>

                </tr>
                <tr>
                    <th>Jan</th>
                    <th>Feb</th>
                    <th>Mar</th>
                    <th>April</th>
                    <th>May</th>
                    <th>June</th>
                    <th>July</th>
                    <th>Aug</th>
                    <th>Sept</th>
                    <th>Oct</th>
                    <th>Nov</th>
                    <th>Dec</th>
                </tr>

                </tr>
            </thead>
            <tbody>
            <tbody>
                {% for p in items %}

                
                    {% csrf_token %}
                    <tr class="item-row" id="{{ p.id }}">

                        <td>
                            <span class="editable" data-field="Item_name">{{ p.item }}</span>
                            <input id="item_{{ p.id }}" name="item" type="text" value="{{ p.item }}"
                                oninput="change_val('item_{{ p.id }}')" class="edit-input" style="display: none">
                        </td>
                        <td>
                            <span class="editable" data-field="Item_Brand">{{ p.item_brand_description }}</span>
                            <input id="item_brand_{{ p.id }}" name="item_brand" type="text"
                                value="{{ p.item_brand_description }}" oninput="change_val('item_brand_{{ p.id }}')"
                                class="edit-input" style="display: none">
                        </td>
                        <td>
                            <span class="editable" data-field="Unit">{{ p.unit }}</span>
                            <input id="unit_{{ p.id }}" name="unit" type="text" value="{{ p.unit }}"
                                oninput="change_val('unit_{{ p.id }}')" class="edit-input" style="display: none">
                        </td>


                        <td><input type="number" name="estimate_budget"></td>

                        <td><input type="number" style="width: 38px;" name="jan"></td>
                        <td><input type="number" style="width: 38px;" name="feb"></td>
                        <td><input type="number" style="width: 38px;" name="mar"></td>
                        <td><input type="number" style="width: 38px;" name="apr"></td>
                        <td><input type="number" style="width: 38px;" name="may"></td>
                        <td><input type="number" style="width: 38px;" name="jun"></td>
                        <td><input type="number" style="width: 38px;" name="jul"></td>
                        <td><input type="number" style="width: 38px;" name="aug"></td>
                        <td><input type="number" style="width: 38px;" name="sep"></td>
                        <td><input type="number" style="width: 38px;" name="oct"></td>
                        <td><input type="number" style="width: 38px;" name="nov"></td>
                        <td><input type="number" style="width: 38px;" name="dec"></td>

                        <td>
                            <span class="editable" data-field="Price">{{ p.unit_cost }}</span>
                            <input id="price_{{ p.id }}" name="price" type="number" value="{{ p.unit_cost }}"
                                oninput="change_val('price_{{ p.id }}')" class="edit-input" style="display: none">
                        </td>



                        <td>
                            <div class="item-actions" style="text-align: center; gap: 20px">
                                <a href="#" class="edit-icon" style="text-align: center;"
                                    onclick="editItem('{{ p.id }}')">
                                    <i class="fas fa-edit text-primary"></i></a>


                                <!-- <form action="{% url 'update' p.id %}" method="post">

                                    {% csrf_token %}
                                    <input id="form_item_{{ p.id }}" type="hidden" name="item_{{ p.id }}"
                                        value="{{ p.item }}">
                                    <input id="form_item_brand_{{ p.id }}" type="hidden" name="item_brand_{{ p.id }}"
                                        value="{{ p.item_brand_description }}">
                                    <input id="form_unit_{{ p.id }}" type="hidden" name="unit_{{ p.id }}"
                                        value="{{ p.unit }}">
                                    <input id="form_price_{{ p.id }}" type="number" style="display: none;"
                                        name="price_{{ p.id }}" value="{{ p.unit_cost }}">

                                    <button type="submit" class="save-icon" style="display: none;"><i
                                            class="fas fa-check text-success"></i></button>
                                    <button type="button" class="cancel-icon" style="display: none;"><i
                                            class="fas fa-times text-danger"></i></button>

                                </form> -->



                                {% if p.id %}
                                <a href="{% url 'delete' p.id %}" class="delete-icon"><i
                                        class="fas fa-trash-alt text-danger"></i></a>
                                {% endif %}

                            </div>
                        </td>


                    </tr>
                    {% endfor %}

            </tbody>
        </table>
        <button type="submit" class="submt">Submit</button>

        </form>
        <button type="button" class="add-btn btn-primary float-left mt-2 mb-2" id="add-btn-{{ category }}" onclick="toggleNewItemRow('{{ category }}')">+</button>

    </div>
</div>

<script>

    function toggleNewItemRow(category) {
        var newRow = document.getElementById('new-item-row-' + category);
        newRow.style.display = newRow.style.display === 'none' ? 'table-row' : 'none';
      } 


</script>

{% endblock %}