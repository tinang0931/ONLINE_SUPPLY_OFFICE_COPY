{% extends "accounts/User/main.html" %}

{% block tracker %}
<style>
  .custom-f{
    display: flex;
    justify-content: center;
  }

  .pad{
    padding: 0px!important;
  }

  .item-received {
  margin: 20 auto;
}

</style>

<div class="container-fluid" style=" height: 68vh; overflow-y: auto; overflow-x: hidden; ">
  <div class="container">
    <h1 class="pr text-center pt-4">REQUEST STATUS</h1>
  </div>
  <div class="container" style=" display: inline-flex; margin: 3; flex-direction: column;">
    <div style="display: flex; align-items: baseline; flex-wrap: nowrap;">
    </div>
  </div>
  <div class="custom-f row w-100 m-auto border text-start text-dark">
    <div class="pad col">
        <table class="table table-bordered" style="margin: 0px!important;">
          <thead>
            <tr>
              <th>Purchase Request No.</th>
              <th>Status</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>0000001</td>
              <td>Waiting for Campus Director Approval</td>
              <td>
                <button id="item-received-btn" style="background-color: gray; color: white; border: 1px solid black; padding: 5px; text-align: center; text-decoration: none; border-radius: 10px;" onclick="itemReceivedClicked()">
                  ITEM RECEIVED
                </button>
              </td>
              <script>
                function itemReceivedClicked() {
                  if (confirm('Are you sure you received the item?')) {
                    // Create a new XMLHttpRequest object
                    var xhr = new XMLHttpRequest();
                    
                    // Define the request method, URL, and whether it should be asynchronous
                    xhr.open('POST', '/your-server-endpoint/', true);
                    
                    // Set the request header (optional)
                    xhr.setRequestHeader('Content-Type', 'application/json');
                    
                    // Define the data to send (if needed)
                    var data = {
                      request_id: 'your_request_id'  // Replace with the actual request ID
                    };
                    
                    // Define the callback function to handle the response
                    xhr.onload = function() {
                      if (xhr.status >= 200 && xhr.status < 300) {
                        // Request was successful, handle the response here
                        var response = JSON.parse(xhr.responseText);
                        // Update the user interface as needed
                        alert('Received message sent to BAC.');
                      } else {
                        // Request failed, handle errors here
                        alert('Error: ' + xhr.statusText);
                      }
                    };
                    
                    // Convert the data to JSON (if needed)
                    var jsonData = JSON.stringify(data);
                    
                    // Send the request
                    xhr.send(jsonData);
                  }
                }
              </script>
            </tr>
          </tbody>
        </table>
    </div>
  </div>
</div>
{% endblock %}
