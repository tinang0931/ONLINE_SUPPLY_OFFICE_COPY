{% extends "accounts/Admin/BAC_Secretariat/nav.html" %}

{% load static %}

{% block pr_items %}

<style>
  button {
    padding: 5px 10px;
    /* Adjusted padding */
    border: unset;
    border-radius: 15px;
    color: #212121;
    z-index: 1;
    background: #e8e8e8;
    position: relative;
    font-weight: 1000;
    font-size: 14px;
    /* Adjusted font size */
    -webkit-box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
    box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
    transition: all 250ms;
    overflow: hidden;
  }

  button::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 0;
    border-radius: 15px;
    background-color: #1c96c5;
    z-index: -1;
    -webkit-box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
    box-shadow: 4px 8px 19px -3px rgba(0, 0, 0, 0.27);
    transition: all 250ms;
  }

  button:hover {
    color: #e8e8e8;
    /* Change color to white when hovered */
  }

  button:hover::before {
    width: 100%;
  }
  .bckbtn {
    display: inline-block;
    position: relative;
}

.bckbtn a {
    display: flex;
    align-items: center;
    text-decoration: none;
}

.bckbtn img {
    width: 25px;
    /* Adjust the width of the image as needed */
    height: 25px;
    /* Adjust the height of the image as needed */
    transition: all 0.3s ease-in-out;
}

.bckbtn:hover img {
    transform: translateX(-5px);
    filter: brightness(1.2);
    /* Adjust the brightness for a highlight effect */
}

.bckbtn::before {
    content: "";
    position: absolute;
    top: -5px;
    /* Adjust the position higher or lower based on your preference */
    right: 0;
    bottom: -5px;
    /* Adjust the bottom position as needed */
    left: 0;
    background-color: #6a89a5;
    /* Set the background color */
    border-radius: 20px;
    opacity: 0;
    z-index: -1;
    transition: opacity 0.3s ease-in-out;
}

.bckbtn:hover::before {
    opacity: 1;
}
.table-bordered th {
    background-color: #1c96c5;
}
</style>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


<div class="container-fluid" style=" height: 74vh; overflow-y: auto; overflow-x: hidden;">

  <div class="container">
    <h1 style="margin-left: 45%;"> MY PURCHASE REQUEST </h1>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="search">
        <input class="form-control mb-3" type="text" placeholder="Search" id="search_bar_request"
          oninput="filterTable()">
      </div>
    </div>
  </div>



    <div class="bckbtn"><a href="{% url 'purchase' %}"><img src="{% static 'images/previous_189252.png' %}"></a></div>

    <div>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Item Name</th>
            <th>Brand / Description</th>
            <th>Unit</th>
            <th>Unit Price</th>
            <th></th>
            
          </tr>
        </thead>
        <tbody>

          {% for item in items %}
          <tr>
            <td>{{ item.item }}</td>
            <td>{{ item.item_brand_description }}</td>
            <td>{{ item.unit }}</td>
            <td>{{ item.unit_cost }}</td>
            <td>
              <a href="" > <img src="{% static 'images/pen.png' %}" alt=""></a>
              <a href="" class="btn btn-danger"><img src="{% static 'images/trash.png' %}" alt=""></a>
              <label for="fileInput{{ item.id }}" style="cursor: pointer;">
                <img src="{% static 'images/link.png' %}" alt="Attach File">
              </label>
              <input type="file" id="fileInput{{ item.id }}" name="attachment" accept=".pdf, .doc, .docx" style="display: none;">
            </td>
          </tr>
          {% endfor %}

            
    
        </tbody>
      </table>
    </div>
</div>


    <script>

    
        document.addEventListener('DOMContentLoaded', function () {
          // Attach click event to the label, which will trigger the hidden file input
          document.querySelectorAll('label[for^="fileInput"]').forEach(function (label) {
            label.addEventListener('click', function () {
              var inputId = this.getAttribute('for');
              document.getElementById(inputId).click();
            });
          });
        });
      
      $(document).ready(function () {
        function calculateTotal() {
          var totalAmount = 0;
          $(".item_total_cost").each(function () {
            var itemCost = parseFloat($(this).text());
            totalAmount += itemCost;
          });
          $("#total_amount").text(totalAmount.toFixed(2));
        }

        calculateTotal();
      });
    </script>

    <footer class="fixed-bottom p-2" style="background-color:  rgba(1, 33, 67, 0.9);">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-4">
            <div class="form-group">
              <label for="purpose" style="color:#FFFFFF">Purpose:</label>
              <textarea class="form-control" id="purpose" placeholder="Purpose" name="purpose" contenteditable="true"
                style="resize: vertical;"></textarea>
            </div>
          </div>
          <div class="col-md-4">
            <div class="text-center" style="color:#FFFFFF">
              <span>Total Amount: â‚±<span id="total_amount">0.00</span></span>
            </div>
          </div>
          <div class="col-md-4">
            <div class="text-right">
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </footer>



    {% endblock %}