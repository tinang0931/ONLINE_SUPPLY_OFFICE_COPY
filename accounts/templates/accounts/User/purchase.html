{% extends "accounts/User/main.html" %}


{% load static %}


{% block purchase %}

<style>
  .table-bordered th {
    background-color: #1c96c5;
  }

  .item-actions {
    display: none;
  }

  tr:hover .item-actions {
    display: flex;
  }

  .table-bordered th {
    background-color: #1c96c5;
  }

  .pp_mp button {
    background-color: #1c96c5;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    transition: background-color 0.3s, color 0.3s;
  }

  .pp_mp button:hover {
    background-color: #144472;
    color: #fff;
  }

textarea.form-control {
    width: 100%;
    padding: 15px;
    margin-top: 5px;
    margin-right: 850px;
    resize: vertical;
    box-sizing: border-box; 
    border: .5px solid #ccc; 
    border-radius: 3%;
  }

  .col-md-4 .text-right button.btn.btn-primary {
    border-radius: 8%;

  }

</style>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<link rel="stylesheet" href="{% static 'css/request.css' %}">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<div class="container-fluid" style="height: 74vh; overflow-y: auto; overflow-x: hidden;">
  <div class="container-fluid" style="height: 68vh; overflow-y: auto; overflow-x: hidden;">
    <h1 class="pr text-center pt-4">PURCHASE REQUEST</h1>

    <div class="row">
      <div class="col-md-1 mb-0">
        <div class="pp_mp">
          <button class="btn btn-primary">
            <a href="{% url 'approved_ppmp'  %}" style="color: white; text-decoration: none;"> PPMP </a>
          </button>
        </div>
      </div>
    </div>

    <form action="{% url 'purchase' %}" method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Item</th>
            <th>Brand Description</th>
            <th>Unit</th>
            <th>Unit Cost</th>
            <th>File Attachment</th>
            <th>Actions</th> 
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.item }} <input type="text" name="items[]" value="{{ item.item }}" style="display:none;"
                id="item_{{ item.id }}"></td>
            <td>{{ item.item_brand_description }} <input type="text" name="item_brands[]"
                value="{{ item.item_brand_description }}" style="display:none;" id="item_brand_{{ item.id }}"></td>
            <td>{{ item.unit }} <input type="text" name="units[]" value="{{ item.unit }}" style="display:none;"
                id="unit_{{ item.id }}"></td>
            <td>{{ item.unit_cost }} <input type="text" name="prices[]" value="{{ item.unit_cost }}"
                style="display:none;" id="unit_cost_{{ item.id }}"></td>

            <td>
              <div class="file-attachment">
                <label for="fileInput{{ item.id }}" style="cursor: pointer;">
                  <img src="{% static 'images/link.png' %}" alt="Attach File">
                </label>
                <input type="file" id="fileInput{{ item.id }}" name="files[]" accept=".pdf, .doc, .docx"
                  style="display: none;">
              </div>
            </td>
            <td>
              <div class="item-actions" style="text-align: center; gap: 20px">
                <a href="#" class="edit-icon" style="text-align: center;" data-id="{{ item.id }}">
                  <i class="fas fa-edit text-privacy"></i>
                </a>
                <a href="#" class="delete-icon" style="text-align: center;" data-id="{{ item.id }}">
                  <i class="fas fa-trash text-danger"></i>
                </a>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </form>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

  <script>
  // Assuming you're using jQuery for simplicity, you can use Fetch API or other libraries if preferred.

  $('.edit-icon').click(function(e) {
    e.preventDefault();
    const itemId = $(this).data('itam.id');
    console.log('Edit icon clicked for item ID:', item.id);
  
    // ... rest of your code
  });
  
  $('.delete-icon').click(function(e) {
    e.preventDefault();
    const itemId = $(this).data('item.id');
    console.log('Edit iocn clicked for item ID:'; item.id)
  });
  
  
</script>

  {% endblock %}