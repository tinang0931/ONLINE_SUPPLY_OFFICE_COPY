{% extends "accounts/User/main.html" %}

{% load static %}

{% block history %}

<style>
.table-responsive th {
  background-color: #1c96c5;
}
</style>
<div class="container-fluid" style="height: 50vh; overflow-y: auto; overflow-x: hidden;">
  <h1 class="pr text-center pt-4">PURCHASE REQUESTS HISTORY</h1>
  
  <div class="search" style="position: relative; float: right; margin-right: 1vh; margin-top: 1%;">
    <i class="fas fa-search" style="position: absolute; top: 39%; transform: translateY(-50%); left: 83%; color: #1c96c5;"></i>
    <input class="form-control mb-3 pr-5 pl-5" type="text" placeholder="Search Username or Date" id="search_bar_request" oninput="filterTable()" style="border: 2px solid #1c96c5;">
</div>
 
  <button class="view_more" id="view-more-button" style="position: absolute; top: 17vh; right: 2vh;">
    <i class="fas fa-angle-double-down"></i> View More
  </button>
  <div class="table-responsive" style="overflow-x: auto; max-height: 50vh; margin-top: 13vh;">

    <table class="table" id="create_request_table" style="border-collapse: collapse; width: 100%;">
      <thead>
        <tr>
          <th class="text-nowrap" style="min-width: 15rem; border: 1px solid white; text-align: center;">Purchase Request ID</th>
          <th class="text-nowrap" style="min-width: 7rem; border: 1px solid white; text-align: center;">Date Requested</th>
          <th class="text-nowrap" style="min-width: 7rem; border: 1px solid white; text-align: center;">Item Name</th>
          <th class="text-nowrap" style="min-width: 7rem; border: 1px solid white; text-align: center;">Quantity</th>
          <th class="text-nowrap" style="min-width: 7rem; border: 1px solid white; text-align: center;">Amount</th>
          <th class="text-center text-nowrap" style="border: 1px solid white; text-align: center;">Attachments</th>
        </tr>
      </thead>
      <tbody>
      {% for item in checkout_items %}
      <tr>
        <td style="border: 1px solid white; text-align: center;">{{ item.checkout.pr_id }}</td>
        <td style="border: 1px solid white; text-align: center;">{{ item.submission_date }}</td>
        <td style="border: 1px solid white; text-align: center;">{{ item.item }}</td>
        <td style="border: 1px solid white; text-align: center;">{{ item.quantity }}</td>
        <td style="border: 1px solid white; text-align: center;">{{ item.total_cost }}</td>
        <td style="border: 1px solid white; text-align: center;"></td>
        <td style="border: 1px solid white; text-align: center;"></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
    </div>
  </div>
</div>
<style>
  
  .view_more {
    background-color: #134472;
    color: #fff;
    border: none;
    padding: 3px 7px;
    border-radius: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.view_more i {
    margin-right: 5px;
}
.input-group {
  width: 300px; 
  margin-right: auto; 
}

.form-control {
  border-radius: 5px;
}

.btn-outline-secondary {
  border-radius: 5px;
}

.form-control {
  display: block;
  width: 18%;
  padding: .375rem .75rem;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.5;
  color: var(--bs-body-color);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-clip: padding-box;
  border-radius: 20px;
  transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
  margin-left: 1300px;
  background-color: transparent; /* Remove background color */
  box-shadow: none; /* Remove box shadow */
}

.search-form {
  justify-content: flex-end;
}

.container-fluid {
  position: relative; 
}
.table th {
  background-color: #1c96c5;
  color: white;
cursor: pointer;
  position: sticky;
  top: 0;
  z-index: 2;
}
</style>
<script>
  function highlightInput(input) {
    input.select();
  }

  function filterTable() {
    var input, filter, table, tr, td, i, j, txtValue;
    input = document.getElementById("search_bar_request");
    filter = input.value.toUpperCase();
    table = document.querySelector(".table");
    tr = table.getElementsByTagName("tr");

    for (i = 1; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td");
      var found = false;
      for (j = 0; j < td.length; j++) {
        txtValue = td[j].textContent || td[j].innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          found = true;
          break;
        }
      }
      if (found) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
</script>


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

{% endblock %}

